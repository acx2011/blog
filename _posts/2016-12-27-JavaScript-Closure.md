---
layout: post
title: JavaScript 中 this 和闭包
tags: [Front-End]
---

**摘要：**用 `jQuery` 带来的一个弊端就是会幼稚地认为用原生 `JavaScript` 写 js 很低级，反正对我就是这样。一开始都是先学了点 js 的皮毛，后来遇到了 `jQuery` 发现原来操作 DOM 的语法竟是这般简单，于是就放弃了继续学习原生 `JavaScript`。直到看到越来越多的前端框架层出不穷，才明白了 `JavaScript` 的学习不是框架的学习，只有明白了其核心，才能对各种框架快速上手。这里就对最早前不屑而之前开始惧怕的原型链等概念做一个总结，希望能够对未来的学习有好的帮助。 
{:.message}

先来看几个知识点：

* 方法在定义的时候（不是调用的时候），就已经确定了方法体内部自由变量的作用域。

* 在执行代码之前，把将要用到的所有的变量都事先拿出来，有的直接赋值了，有的先用 `undefined` 占个空。

* 在方法中 `this` 到底取何值，是在方法真正被调用执行的时候确定的，方法定义的时候确定不了。

`this` 的取值，分四种情况：

## 构造函数

构造函数就是用来 new 对象的函数，所有的函数都可以 new 一个对象，但是有些函数的定义是为了 new 一个对象，而有些函数则不是。

如果一个函数作为构造函数用，那么其中的 `this` 就代表它即将 new 出来的对象。

## 函数作为对象的一个属性

如果函数作为对象的一个属性，并且作为对象的一个属性被调用时，函数中的 `this` 指向该对象。

## 函数用 `call` 或者 `apply` 调用

当一个函数被 `call` 和 `apply` 调用时，`this` 的值就取传入的对象的值。

## 全局 & 调用普通函数

在全局环境下和普通函数在调用时，`this` 永远是 `window`。